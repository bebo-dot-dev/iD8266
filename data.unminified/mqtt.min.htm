<!DOCTYPE HTML>
<html lang="en">
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>MQTT Configuration</title>
		<link href="css/bootstrap.min.css" media="all" rel="stylesheet" />
		<link href="css/app.css" media="all" rel="stylesheet" />
	</head>
	<body>
		<div class="container">
			<nav class="navbar navbar-default">
				<div class="container-fluid">
					<div class="navbar-header">
						<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
							<span class="sr-only">Toggle navigation</span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</button>
						<a class="navbar-brand" href="/"> MQTT Config </a>
					</div>
					<div id="navbar" class="navbar-collapse collapse">
						<ul class="navbar-nav list-inline">
							<li>
								<a href="/">
								<button type="button" class="btn btn-default navbar-btn">
									Home
								</button></a>
							</li>
							<li>
								<a href="/logoff">
								<button type="button" class="btn btn-default navbar-btn">
									Log Off
								</button></a>
							</li>
						</ul>
					</div><!--/.nav-collapse -->
				</div><!--/.container-fluid -->
			</nav>
			<div class="alert alert-success" role="alert"><strong>Please wait</strong> loading settings...</div>
			<div id="mainPnl" class="dnone">				
				<form id="gpioFrm" method='post' action='/mqtt' enctype='multipart/form-data' autocomplete='off'>
					<div class="panel panel-default">
						<div class="panel-heading">
							<h3 class="panel-title">MQTT</h3>
						</div>
						<div class="panel-body">
							<div class="form-group">
								<div class="formCtrl">
									<label for="mqttSystemEnabled">Enable MQTT</label>
									<input type="checkbox" class="form-control" id="mqttSystemEnabled" name="mqttSystemEnabled" >
								</div>
								<a role="button" tabindex="0" data-trigger="focus" class="info" data-po="po" title="Enable MQTT" data-placement="bottom" data-html="true" data-content="Enables/disables the lightweight MQTT publish/subscribe protocol for the device.<br/><br/>A combination of configured device hostname, device type (<strong>D</strong>igital, <strong>A</strong>nalog, <strong>P</strong>eripheral) and GPIO/Peripheral device ordinal position index Ids are used as MQTT publish/subscribe topic names<br/>e.g. the 1st configured peripheral would be subscribed to a topic that looks like this, when this peripheral is an output type device: iD8266_10A74E/P0/In<br/><br/>See&nbsp;<a href='https://en.wikipedia.org/wiki/MQTT' target='_blank'>MQTT</a>&nbsp;for details"> <span>i</span> </a>
							</div>
							<div class="mqtt">
								<div class="form-group">
									<div class="formCtrl">
										<label for="mqttServerBrokerIp">MQTT Server Broker</label>
										<input type="text" class="form-control ip_address" id="mqttServerBrokerIp" name="mqttServerBrokerIp" placeholder="nnn.nnn.nnn.nnn" >
									</div>
									<a role="button" tabindex="0" data-trigger="focus" class="info" data-po="po" title="MQTT Server Broker" data-placement="bottom" data-content="The IP address of the MQTT server broker to publish outbound messages to."> <span>i</span> </a>
								    <span id="mqttServerBrokerIpValFail" class="valFail">* A valid IP address is required</span>
								</div>
								<div class="form-group">
									<div class="formCtrl">
										<label for="mqttServerBrokerPort">MQTT Server Broker Port</label>
										<input type="text" class="form-control w70 number" id="mqttServerBrokerPort" name="mqttServerBrokerPort" maxlength="5" >
									</div>
									<a role="button" tabindex="0" data-trigger="focus" class="info" data-po="po" title="MQTT Server Port" data-placement="bottom" data-content="Configure the MQTT service tcp port. Default is 1883. Valid range is 1-65535"> <span>i</span> </a>
								    <span id="mqttServerBrokerPortValFail" class="valFail">* A valid tcp/ip port value is required</span>
								</div>
								<div class="form-group">
									<div class="formCtrl">
										<label for="mqttUsername">MQTT Username</label>
										<input type="text" class="form-control valtxt" id="mqttUsername" name="mqttUsername" maxlength="32" >
									</div>
									<a role="button" tabindex="0" data-trigger="focus" class="info" data-po="po" title="MQTT Username" data-placement="bottom" data-content="The username to use when authenticating with the MQTT server broker. Max length is 32"> <span>i</span> </a>
								    <span id="mqttUsernameValFail" class="valFail">* A valid username is required</span>
								</div>
								<div class="form-group">
									<div class="formCtrl">
										<label for="mqttPassword">MQTT Password</label>
										<input type="password" class="form-control" id="mqttPassword" name="mqttPassword" maxlength="32" autocomplete="new-password">
									</div>
									<a role="button" tabindex="0" data-trigger="focus" class="info" data-po="po" title="MQTT Password" data-placement="bottom" data-content="The password to use when authenticating with the MQTT server broker. Max length is 32"> <span>i</span> </a>
								    <span id="mqttPasswordValFail" class="valFail">* A valid password is required</span>
								</div>
							</div>
						</div>
					</div>									
					<button type="submit" class="btn btn-default dnone">
						Submit
					</button>
				</form>				
			</div>
		</div>
		<script src="js/jquery-2.2.0.min.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<script src="js/jquery.mask.min.js"></script>
		<script src="js/mqtt.js"></script>
	</body>
</html>
